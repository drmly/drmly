<html>

<head>
    <link rel='icon' href='favicon.ico' />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset='utf-8'>
    <title>ÃŸâ€ Ï€âˆ‚ ðŸ˜´</title>
    <!-- todo: should light up on title w/ ytDl copied! -->
</head>
<script src="public/jquery.js"></script>
<script src="public/dropzone.min.js"></script>
<link rel="stylesheet" href="/public/style.css">
<link href="public/bootstrap-grid.min.css" rel="stylesheet">


<body class="stretch " style="background-color:rgb(235, 229, 209); height: 100%; ;">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-6">
                <h2>
                    <a href="/frames">frames</a>
                    <a href="/jobs">jobs</a>
                    <a href="/videos">videos</a>
                </h2>
                <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/r/deepdreamvideo/submit?url=' + encodeURIComponent(window.location); return false">
                    <img src="//www.redditstatic.com/spreddit12.gif" alt="submit to reddit" border="0" /> </a>
                <div class="button-container">
                    <form action="/openframes" target="dummyframe">
                        <input id="openframes" type="submit" value="open frames" />
                    </form>

                    <form action="/openvideos" target="dummyframe">
                        <input id="openvideos" type="submit" value="open videos" />
                    </form>

                    <form action="/openlogs" target="dummyframe">
                        <input id="openlogs" type="submit" value="open logs" />
                    </form>

                </div>
                <div style="color:forestgreen">
                    <div title="tip: practice with a short 5 second video to get paramaters how you like">
                        <a id="giphy" href="http://giphy.com" target="_blank">giphy</a>
                    </div>
                </div>

                <!-- video input options: -->
                <!-- video start time and end time -->

                <!-- video output options:
    <div>
        <input type="checkbox" name="stretchvideo" value="stretchvideo"> stretch video
        todo: put original side by side with dreamed version in another mp4 
    </div> -->

                <!-- todo -->
                <!-- posting to social media:
    <div>
         post to /r/deepdreamvideo <input type="checkbox">
    </div> -->
                <!-- todo -->
                <!-- Youtube-dl support: -->
                <!-- 
<div>
    <br>
    clip start time:
    <input type="number" value="0">
    duration:
    <input type="text">
</div> -->

                <!-- <div>fp profile album or picture support</div> -->


                <!-- todo
<div>resume a failed download</div> -->
                <div>
                    <form class="dropzone" onsubmit="showHide()" action="/g" method="post" enctype="multipart/form-data" target="dummyframe">

                        <!-- <select name="algo"> Algo:
                <option selected value="dream">Deep dream </option>
                <option disabled value="neural"> Neural style </option>
                <option disabled value="bddns"> DD & NS blended </option>
                <option disabled value="neural"> Fast style </option>
                <option disabled value="bddfs"> DD & FS blended </option>
                <option disabled value="random">random </option>
                <option disabled value="random">random each frame </option>

            </select> -->
                        <!-- Deeper dream: <select name="deeper" id="">
                  <option value="0" selected>0</option>
                  <option value="1" selected>1</option>
                  <option value="2" selected>2</option>
                  <option value="3" selectd>3</option>
                  <option value="4" selected>4</option>
                  <option value="5" selected>5</option>
              </select> -->
                        <!-- <input type="number" step="2" value="20" max="90"> Temporal incoherence stabilizer (how much previous frame opacity overlay) -->
                        <!--             
            <div>
                save as defaults 
                <input type="button">
            </div> -->
                        <input id="yt" type="checkbox" name="yt" value="yt"> yt-dl clipboard
                        <span></span>
                        <div>
                            <input id="openafter" type="checkbox" name="of" value="of"> open frames dir
                            <input checked type="checkbox" name="oo" value="oo"> output dir
                            <input type="checkbox" name="ov" value="ov"> video dir
                            <input type="checkbox" checked name="ovf" value="ovf">video file
                        </div>
                        <div style="color:forestgreen" title="tip: consider slicing the video to frames to check for optimum fps, then cancel job if processing excessive frames. Also if on a mac preview can tell you how many frames are in a gif">
                            <br> fps:
                            <input id="fps" type="number" step="1" max="30" value="1" name="fps">
                        </div>
                        <div>
                            randomization type:
                            <select name="rl" id="rt">
                                <option value="default" selected>Off</option>
                                <option value="random">random</option>
                                <option value="nc">no conv</option>
                                <option value="c">conv</option>
                            </select>
                            done every n frames:
                            <input id="n" type="number" style="1" value="0" name="rle">
                        </div>
                        <div>
                            linear increase in iterations:
                            <input id="lii" type="number" step="1" max="18" name="li" value="0">
                            <!-- octaves: <input id="lio" type="number" step="1" max="3" nam="ocli" value="0"> -->

                        </div>
                        <div>
                            waver up or down iterations for each frame:
                            <input id="waver" type="number" step="1" max="20" name="iw" value="0">
                        </div>
                        <!-- <div>
                waver up or down octave for each frame:
                <input type="number" step="1" max="1" name="ow" value="0">
            </div> -->

                        <br>
                        <div title="tf uses different layers to alter the affect on the ml algo">
                            layer choice:
                            <select autofocus id="layer" name="layer">
                                <option value='conv2d0_pre_relu/conv'>conv2d0_pre_relu/conv 63 </option>
                                <option value='conv2d1_pre_relu/conv'>conv2d1_pre_relu/conv 63 </option>
                                <option value='conv2d2_pre_relu/conv'>conv2d2_pre_relu/conv 191 </option>
                                <option value='mixed3a_1x1_pre_relu/conv'>mixed3a_1x1_pre_relu/conv 63 </option>
                                <option value='mixed3a_3x3_bottleneck_pre_relu/conv'>mixed3a_3x3_bottleneck_pre_relu/conv 95 </option>
                                <option value='mixed3a_3x3_pre_relu/conv'>mixed3a_3x3_pre_relu/conv 127 </option>
                                <option value='mixed3a_5x5_bottleneck_pre_relu/conv'>mixed3a_5x5_bottleneck_pre_relu/conv 15 </option>
                                <option value='mixed3a_5x5_pre_relu/conv'>mixed3a_5x5_pre_relu/conv 31 </option>
                                <option value='mixed3a_pool_reduce_pre_relu/conv'>mixed3a_pool_reduce_pre_relu/conv 31 </option>
                                <option value='mixed3b_1x1_pre_relu/conv'>mixed3b_1x1_pre_relu/conv 127 </option>
                                <option value='mixed3b_3x3_bottleneck_pre_relu/conv'>mixed3b_3x3_bottleneck_pre_relu/conv 127 </option>
                                <option value='mixed3b_3x3_pre_relu/conv'>mixed3b_3x3_pre_relu/conv 191 </option>
                                <option value='mixed3b_5x5_bottleneck_pre_relu/conv'>mixed3b_5x5_bottleneck_pre_relu/conv 31 </option>
                                <option value='mixed3b_5x5_pre_relu/conv'>mixed3b_5x5_pre_relu/conv 95 </option>
                                <option value='mixed3b_pool_reduce_pre_relu/conv'>mixed3b_pool_reduce_pre_relu/conv 63 </option>
                                <option value='mixed4a_1x1_pre_relu/conv'>mixed4a_1x1_pre_relu/conv 191 </option>
                                <option value='mixed4a_3x3_bottleneck_pre_relu/conv'>mixed4a_3x3_bottleneck_pre_relu/conv 95 </option>
                                <option value='mixed4a_3x3_pre_relu/conv'>mixed4a_3x3_pre_relu/conv 203 </option>
                                <option value='mixed4a_5x5_bottleneck_pre_relu/conv'>mixed4a_5x5_bottleneck_pre_relu/conv 15 </option>
                                <option value='mixed4a_5x5_pre_relu/conv'>mixed4a_5x5_pre_relu/conv 47 </option>
                                <option value='mixed4a_pool_reduce_pre_relu/conv'>mixed4a_pool_reduce_pre_relu/conv 63 </option>
                                <option value='mixed4b_1x1_pre_relu/conv'>mixed4b_1x1_pre_relu/conv 159 </option>
                                <option value='mixed4b_3x3_bottleneck_pre_relu/conv'>mixed4b_3x3_bottleneck_pre_relu/conv 111 </option>
                                <option value='mixed4b_3x3_pre_relu/conv'>mixed4b_3x3_pre_relu/conv 223 </option>
                                <option value='mixed4b_5x5_bottleneck_pre_relu/conv'>mixed4b_5x5_bottleneck_pre_relu/conv 23 </option>
                                <option value='mixed4b_5x5_pre_relu/conv'>mixed4b_5x5_pre_relu/conv 63 </option>
                                <option value='mixed4b_pool_reduce_pre_relu/conv'>mixed4b_pool_reduce_pre_relu/conv 63 </option>
                                <option value='mixed4c_1x1_pre_relu/conv'>mixed4c_1x1_pre_relu/conv 127 </option>
                                <option value='mixed4c_3x3_bottleneck_pre_relu/conv'>mixed4c_3x3_bottleneck_pre_relu/conv 127 </option>
                                <option value='mixed4c_3x3_pre_relu/conv'>mixed4c_3x3_pre_relu/conv 255 </option>
                                <option value='mixed4c_5x5_bottleneck_pre_relu/conv'>mixed4c_5x5_bottleneck_pre_relu/conv 23 </option>
                                <option value='mixed4c_5x5_pre_relu/conv'>mixed4c_5x5_pre_relu/conv 63 </option>
                                <option value='mixed4c_pool_reduce_pre_relu/conv'>mixed4c_pool_reduce_pre_relu/conv 63 </option>
                                <option value='mixed4d_1x1_pre_relu/conv'>mixed4d_1x1_pre_relu/conv 111 </option>
                                <option value='mixed4d_3x3_bottleneck_pre_relu/conv'>mixed4d_3x3_bottleneck_pre_relu/conv 143 </option>
                                <option value='mixed4d_3x3_pre_relu/conv'>mixed4d_3x3_pre_relu/conv 287 </option>
                                <option value='mixed4d_5x5_bottleneck_pre_relu/conv'>mixed4d_5x5_bottleneck_pre_relu/conv 31 </option>
                                <option value='mixed4d_5x5_pre_relu/conv'>mixed4d_5x5_pre_relu/conv 63 </option>
                                <option value='mixed4d_pool_reduce_pre_relu/conv'>mixed4d_pool_reduce_pre_relu/conv 63 </option>
                                <option value='mixed4e_1x1_pre_relu/conv'>mixed4e_1x1_pre_relu/conv 255 </option>
                                <option value='mixed4e_3x3_bottleneck_pre_relu/conv'>mixed4e_3x3_bottleneck_pre_relu/conv 159 </option>
                                <option value='mixed4e_3x3_pre_relu/conv'>mixed4e_3x3_pre_relu/conv 319 </option>
                                <option value='mixed4e_5x5_bottleneck_pre_relu/conv'>mixed4e_5x5_bottleneck_pre_relu/conv 31 </option>
                                <option value='mixed4e_5x5_pre_relu/conv'>mixed4e_5x5_pre_relu/conv 127 </option>
                                <option value='mixed4e_pool_reduce_pre_relu/conv'>mixed4e_pool_reduce_pre_relu/conv 127 </option>
                                <option value='mixed5a_1x1_pre_relu/conv'>mixed5a_1x1_pre_relu/conv 255 </option>
                                <option value='mixed5a_3x3_bottleneck_pre_relu/conv'>mixed5a_3x3_bottleneck_pre_relu/conv 159 </option>
                                <option value='mixed5a_3x3_pre_relu/conv'>mixed5a_3x3_pre_relu/conv 319 </option>
                                <option value='mixed5a_5x5_bottleneck_pre_relu/conv'>mixed5a_5x5_bottleneck_pre_relu/conv 47 </option>
                                <option value='mixed5a_5x5_pre_relu/conv'>mixed5a_5x5_pre_relu/conv 127 </option>
                                <option value='mixed5a_pool_reduce_pre_relu/conv'>mixed5a_pool_reduce_pre_relu/conv 127 </option>
                                <option value='mixed5b_1x1_pre_relu/conv'>mixed5b_1x1_pre_relu/conv 383 </option>
                                <option value='mixed5b_3x3_bottleneck_pre_relu/conv'>mixed5b_3x3_bottleneck_pre_relu/conv 191 </option>
                                <option value='mixed5b_3x3_pre_relu/conv'>mixed5b_3x3_pre_relu/conv 383 </option>
                                <option value='mixed5b_5x5_bottleneck_pre_relu/conv'>mixed5b_5x5_bottleneck_pre_relu/conv 47 </option>
                                <option value='mixed5b_5x5_pre_relu/conv'>mixed5b_5x5_pre_relu/conv 127 </option>
                                <option value='mixed5b_pool_reduce_pre_relu/conv'>mixed5b_pool_reduce_pre_relu/conv 127 </option>
                                <option value='head0_bottleneck_pre_relu/conv'>head0_bottleneck_pre_relu/conv 127 </option>
                                <option value='head1_bottleneck_pre_relu/conv'>head1_bottleneck_pre_relu/conv 127 </option>
                            </select>
                        </div>
                        <div>
                            channel:
                            <input type="number" min="1" step="1" name="ch" value="1">
                        </div>
                        iterations:
                        <input id="iterations" type="number" min="1" step="1" max="1000" name="iterations" value="1">
                        <!-- <br><input type="checkbox" name="itr"> make iterations random every frame between 1 -20 -->
                        <br>octaves:
                        <input id="octaves" type="number" step="1" max="40" name="octaves" value="1">
                        <!-- octave scale: <input type="text" name="dream levels"> dream scale coefficient: -->
                        <br>octave scale:
                        <input id="ocscale" type="number" step=".1" max="4" name="ocscale" value="1.9">
                        <!-- octave scale: <input type="text" name="dream levels"> dream scale coefficient: -->
                        <div>
                            <input type='file' name="file" id="choose">
                            <img id="blah" src="#" alt="" />
                            <!-- todo: sync dir option(continually output dreams from a dir as it) -->
                            <input style="background-color: rgb(187, 142, 189)" id="start" type="submit" value="start dreaming">
                        </div>
                    </form>

                </div>
            </div>
            <div class="col-md-6">

                <center>
                    <pre id="chatpane"></pre>
                </center>
                <audio id="my_audio" class="my_audio" controls preload="none">
                    <source src="public/x.mp3" type="audio/mp3">
                </audio>

                <button onclick="play_audio('play')">PLAY</button>
                <button onclick="play_audio('stop')">STOP</button>
            </div>
            <script>
                document.getElementById('my_audio').muted = true;
                $(".my_audio").trigger('load');
                function play_audio(task) {
                    if (task == 'play') {
                        $(".my_audio").trigger('play');
                    }
                    if (task == 'stop') {
                        $(".my_audio").trigger('pause');
                        $(".my_audio").prop("currentTime", 0);
                    }
                }
            </script>
            <!-- <center>
                    <pre id="chatpane"></pre>
                    <input id="name" style="width: 100px">
                    <input id="msg" style="width: 250px">
                </center>
            </div> -->
            <script src="/public/socket.js"></script>

            <footer>
                <div>
                    <a href="about">about</a>
                    <span id="label"> </span>
                    <button onclick=keycodes()>?</button>
                </div>
            </footer>
        </div>
    </div>
    </div>
    <script>
        console.log("i'm logging")
        select = document.getElementById("layer")
        select[Math.floor(Math.random() * select.length)].selected = true
    </script>
    <script>
        //keypressing shortcuts
        // todo: make numeric keys shortcut to saved parameter sets 
        function keycodes() {
            alert("key press shortcuts available, going by first letter if available, second letter if not")
        }
        var start = $("#start")
        $(this).on('keydown', function (e) {
            $('#label').text(e.keyCode);
            e.which == 49 ?
                $("fps").val == '4' : null// todo have 49 key all values to 1 (perfect for dev. mode!) later implement for all numeric keys
            e.which == 191 ?
                keycodes() : null
            e.which == 69 ?
                $("#openlogs").click() : null
            e.which == 12 ?
                $("#compress").focus() : null
            e.which == 71 ?
                window.open('http://giphy.com', '_blank') : null
            e.which == 74 ?
                window.open('jobs', '_self') : null
            e.which == 68 ?
                window.open('/', '_self') : null
            e.which == 77 ?
                $("#openframes").click() : null
            e.which == 67 ?
                $("#octaves").focus() : null
            e.which == 86 ?
                $("#openvideos").click() : null
            e.which == 79 ?
                $("#openafter").focus() : null
            e.which == 70 ?
                $("#fps").focus() : null
            e.which == 65 ?
                $("#rt").focus() : null
            e.which == 78 ?
                $("#n").focus() : null
            e.which == 87 ?
                $("#waver").focus() : null
            e.which == 89 ?
                $("#layer").focus() : null
            e.which == 83 ?
                $("#start").focus() : null
            e.which == 73 ?
                $("#iterations").focus() : null
            e.which == 76 ?
                $("#lii").focus() : null
            e.which == 72 ?
                $("#choose").focus() : null
            e.which == 89 ?
                $("#yt").focus() : null
            if (e.which == 90) {
                if ($("body").hasClass("bg")) {
                    $("body").removeClass("bg");
                } else {
                    $("body").addClass("bg");
                }
            }
        });

    </script>
    <iframe width="0" height="0" border="0" name="dummyframe" id="dummyframe"></iframe>
</body>

<style type="text/css">
    /* body{
        position: relative;
    } */

    body {
        content: "";
        display: block;
        z-index: -1;
        color: rgb(0, 0, 0);
        /* opacity: 0.1; */
        background-color: #d8da3d display: inline-block;
        font-size: 32px;

        transform-origin: 0 0;
    }

    .bg {
        background-image: url('./public/d.png');
    }

    /* .bg.hide {
        background-image:none;
    } */

    span {
        font-size: 16px;
        vertical-align: top;
    }

    input {
        font-size: 20px;
        height: 1.5em;
    }

    .button-container form,
    .button-container form div {
        display: inline;
    }

    .button-container button {
        display: inline;
        vertical-align: middle;
    }

    .double {
        /* zoom: 2; */
        transform: scale(2);
        -ms-transform: scale(2);
        -webkit-transform: scale(2);
        -o-transform: scale(2);
        -moz-transform: scale(2);
        transform-origin: 0 0;
        -ms-transform-origin: 0 0;
        -webkit-transform-origin: 0 0;
        -o-transform-origin: 0 0;
        -moz-transform-origin: 0 0;
        -webkit-transform-origin: 0 0;
    }
</style>



</html>